<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Agent Platform Architecture Guide</title>
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20px;
            background: white;
        }
        
        h1 {
            color: #2563eb;
            border-bottom: 3px solid #2563eb;
            padding-bottom: 10px;
            margin-top: 30px;
            page-break-before: always;
        }
        
        h1:first-of-type {
            page-break-before: avoid;
        }
        
        h2 {
            color: #1e40af;
            border-left: 4px solid #3b82f6;
            padding-left: 15px;
            margin-top: 25px;
        }
        
        h3 {
            color: #1e3a8a;
            margin-top: 20px;
        }
        
        .cover {
            text-align: center;
            padding: 100px 0;
            page-break-after: always;
        }
        
        .cover h1 {
            font-size: 42px;
            margin-bottom: 20px;
            border: none;
            page-break-before: avoid;
        }
        
        .cover .subtitle {
            font-size: 24px;
            color: #64748b;
            margin-bottom: 40px;
        }
        
        .cover .meta {
            font-size: 16px;
            color: #94a3b8;
        }
        
        pre {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            overflow-x: auto;
            font-size: 12px;
            line-height: 1.4;
            page-break-inside: avoid;
        }
        
        code {
            font-family: 'Courier New', monospace;
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 13px;
        }
        
        .architecture-box {
            background: #f0f9ff;
            border: 2px solid #3b82f6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            page-break-inside: avoid;
        }
        
        .decision-box {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 15px;
            margin: 15px 0;
            page-break-inside: avoid;
        }
        
        .warning-box {
            background: #fffbeb;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 15px 0;
            page-break-inside: avoid;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            page-break-inside: avoid;
        }
        
        th {
            background: #3b82f6;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            border: 1px solid #e2e8f0;
            padding: 10px;
        }
        
        tr:nth-child(even) {
            background: #f8fafc;
        }
        
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        li {
            margin: 8px 0;
        }
        
        .section-number {
            color: #3b82f6;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .tech-badge {
            display: inline-block;
            background: #3b82f6;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            margin: 5px 5px 5px 0;
        }
        
        .cost-estimate {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            page-break-inside: avoid;
        }
        
        @media print {
            body {
                padding: 0;
            }
            
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Cover Page -->
    <div class="cover">
        <h1>ğŸ¤– AI Agent Platform</h1>
        <div class="subtitle">Complete Architecture Guide</div>
        <div class="meta">
            <p><strong>Platform Type:</strong> Visual Workflow Automation (n8n/MindStudio Style)</p>
            <p><strong>Tech Stack:</strong> Python FastAPI + React + Azure</p>
            <p><strong>Version:</strong> 1.0</p>
            <p><strong>Date:</strong> December 2025</p>
        </div>
    </div>

    <!-- Table of Contents -->
    <h1>ğŸ“‹ Table of Contents</h1>
    <ol>
        <li>Executive Summary</li>
        <li>Architecture Overview</li>
        <li>Technology Stack</li>
        <li>Node Plugin System</li>
        <li>Backend Folder Structure</li>
        <li>Frontend Folder Structure</li>
        <li>Workflow Execution Engine</li>
        <li>Azure Deployment Architecture</li>
        <li>Security & Observability</li>
        <li>Implementation Roadmap</li>
        <li>Cost Estimates</li>
    </ol>

    <!-- 1. Executive Summary -->
    <h1>1. Executive Summary</h1>
    
    <div class="architecture-box">
        <h3>ğŸ¯ Project Goal</h3>
        <p>Build a scalable AI agent and workflow automation platform that allows users to visually design, execute, and monitor complex workflows composed of AI models, APIs, databases, and custom logic.</p>
    </div>

    <div class="decision-box">
        <h3>âœ… Key Architecture Decision</h3>
        <p><strong>Recommended Approach: Hybrid Plugin Architecture (Monolith with Async Workers)</strong></p>
        <ul>
            <li>âœ… Nodes as internal Python packages (NOT microservices)</li>
            <li>âœ… Async execution via Celery workers</li>
            <li>âœ… Cosmos DB for persistence + Redis for queue/cache</li>
            <li>âœ… React Flow for visual workflow builder</li>
            <li>âœ… Azure App Service + Container Instances deployment</li>
        </ul>
    </div>

    <h2>Why NOT Microservices for Nodes?</h2>
    <table>
        <tr>
            <th>Consideration</th>
            <th>Microservices Approach</th>
            <th>Plugin Approach (Recommended)</th>
        </tr>
        <tr>
            <td><strong>Deployment</strong></td>
            <td>âŒ Complex (20+ services)</td>
            <td>âœ… Simple (1 API + workers)</td>
        </tr>
        <tr>
            <td><strong>Latency</strong></td>
            <td>âŒ Network overhead between nodes</td>
            <td>âœ… In-process execution</td>
        </tr>
        <tr>
            <td><strong>Cost</strong></td>
            <td>âŒ High (separate compute per node)</td>
            <td>âœ… Low (shared resources)</td>
        </tr>
        <tr>
            <td><strong>Debugging</strong></td>
            <td>âŒ Distributed tracing needed</td>
            <td>âœ… Single codebase</td>
        </tr>
        <tr>
            <td><strong>Scalability</strong></td>
            <td>âœ… Scale individual nodes</td>
            <td>âœ… Scale workers horizontally</td>
        </tr>
    </table>

    <!-- 2. Architecture Overview -->
    <h1>2. Architecture Overview</h1>

    <h2>System Architecture Diagram</h2>
    <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Frontend (React + Vite + React Flow)            â”‚
â”‚  Visual Workflow Builder â†’ Redux Store â†’ RTK Query API      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ REST/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FastAPI Main App (Azure App Service)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Workflow  â”‚   Node       â”‚  Execution  â”‚   Realtime  â”‚ â”‚
â”‚  â”‚   API       â”‚   Registry   â”‚   API       â”‚   WebSocket â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Azure Service Bus / Redis Queue                     â”‚
â”‚           (Async Task Queue for Workflows)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Celery/Dramatiq Workers (Azure Container Instances)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Workflow Execution Engine                    â”‚   â”‚
â”‚  â”‚   â€¢ State Machine (DAG traversal)                     â”‚   â”‚
â”‚  â”‚   â€¢ Node Executor (calls registered plugins)         â”‚   â”‚
â”‚  â”‚   â€¢ Error Handler & Retry Logic                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            Node Plugin System (22 Nodes)             â”‚   â”‚
â”‚  â”‚   Core: Entry, Text, Iterator, Switch, Response      â”‚   â”‚
â”‚  â”‚   AI: LLM (OpenAI/Azure/Anthropic)                   â”‚   â”‚
â”‚  â”‚   Integration: API, Email, Zapier                    â”‚   â”‚
â”‚  â”‚   Data: DB Connect, Fetch/Store, KV Get/Set          â”‚   â”‚
â”‚  â”‚   Logic: Code Runner, Execute Workflow               â”‚   â”‚
â”‚  â”‚   Visualization: Bar Chart                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Azure Cosmos DB                           â”‚
â”‚  â€¢ Workflows (definition, versions)                          â”‚
â”‚  â€¢ Executions (runs, logs, state snapshots)                  â”‚
â”‚  â€¢ Users, Workspaces, Credentials (encrypted)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    </pre>

    <!-- 3. Technology Stack -->
    <h1>3. Technology Stack</h1>

    <h2>Backend Stack</h2>
    <div>
        <span class="tech-badge">Python 3.11</span>
        <span class="tech-badge">FastAPI</span>
        <span class="tech-badge">Azure Cosmos DB</span>
        <span class="tech-badge">Azure App Service</span>
        <span class="tech-badge">Celery</span>
        <span class="tech-badge">Redis</span>
        <span class="tech-badge">Azure Service Bus</span>
        <span class="tech-badge">OAuth2 + JWT</span>
        <span class="tech-badge">SlowAPI (Rate Limiting)</span>
        <span class="tech-badge">RestrictedPython</span>
    </div>

    <h2>Frontend Stack</h2>
    <div>
        <span class="tech-badge">React 18</span>
        <span class="tech-badge">TypeScript</span>
        <span class="tech-badge">Vite</span>
        <span class="tech-badge">React Flow</span>
        <span class="tech-badge">Redux Toolkit</span>
        <span class="tech-badge">RTK Query</span>
        <span class="tech-badge">Material Tailwind UI</span>
        <span class="tech-badge">TanStack Table v8</span>
        <span class="tech-badge">WebSocket</span>
    </div>

    <h2>Azure Services</h2>
    <table>
        <tr>
            <th>Service</th>
            <th>Purpose</th>
            <th>Est. Cost/Month</th>
        </tr>
        <tr>
            <td>Azure App Service (P1v3)</td>
            <td>Host FastAPI backend</td>
            <td>~$200</td>
        </tr>
        <tr>
            <td>Container Instances (2-5 workers)</td>
            <td>Celery workers</td>
            <td>~$100-200</td>
        </tr>
        <tr>
            <td>Cosmos DB (4000 RU/s)</td>
            <td>NoSQL database</td>
            <td>~$192</td>
        </tr>
        <tr>
            <td>Redis Cache (P1, 6GB)</td>
            <td>Queue + Cache</td>
            <td>~$167</td>
        </tr>
        <tr>
            <td>Service Bus (Premium)</td>
            <td>Message queue</td>
            <td>~$665</td>
        </tr>
        <tr>
            <td>Static Web Apps</td>
            <td>React frontend</td>
            <td>~$9</td>
        </tr>
        <tr>
            <td>Key Vault</td>
            <td>Secrets management</td>
            <td>~$1</td>
        </tr>
        <tr>
            <td>Blob Storage</td>
            <td>File uploads</td>
            <td>~$5</td>
        </tr>
        <tr>
            <td>Application Insights</td>
            <td>Monitoring</td>
            <td>~$50</td>
        </tr>
    </table>

    <!-- 4. Node Plugin System -->
    <h1>4. Node Plugin System</h1>

    <h2>Node Architecture Pattern</h2>
    <pre>
BaseNode (Abstract Class)
    â”œâ”€â”€ get_metadata() â†’ NodeMetadata
    â”œâ”€â”€ execute(config, context) â†’ NodeExecutionResult
    â”œâ”€â”€ validate_config(config)
    â””â”€â”€ pre_execute() / post_execute() hooks

NodeRegistry (Singleton)
    â”œâ”€â”€ register(node_class)
    â”œâ”€â”€ get(node_id) â†’ Node Class
    â”œâ”€â”€ list_all() â†’ List[NodeMetadata]
    â””â”€â”€ auto_discover() â†’ Load all nodes
    </pre>

    <h2>22 Nodes to Implement</h2>
    <table>
        <tr>
            <th>Category</th>
            <th>Nodes</th>
            <th>Priority</th>
        </tr>
        <tr>
            <td><strong>Core</strong></td>
            <td>Entry, Text, Iterator, Switch, Parameter, Response</td>
            <td>ğŸ”¥ High</td>
        </tr>
        <tr>
            <td><strong>AI/LLM</strong></td>
            <td>LLM Node (OpenAI, Azure, Anthropic)</td>
            <td>ğŸ”¥ High</td>
        </tr>
        <tr>
            <td><strong>Integration</strong></td>
            <td>API Node, Send Email, Mailtrap, Zapier Webhook</td>
            <td>ğŸ”¥ High</td>
        </tr>
        <tr>
            <td><strong>Data</strong></td>
            <td>DB Connect, Fetch Table, Store Table, KV Get/Set, Global Data, To JSON</td>
            <td>âš¡ Medium</td>
        </tr>
        <tr>
            <td><strong>Logic</strong></td>
            <td>Code Runner (Python Sandbox), Execute Workflow</td>
            <td>âš¡ Medium</td>
        </tr>
        <tr>
            <td><strong>Visualization</strong></td>
            <td>Bar Chart Node</td>
            <td>ğŸ“Š Low</td>
        </tr>
    </table>

    <!-- 5. Backend Folder Structure -->
    <h1>5. Backend Folder Structure (Python)</h1>

    <pre>
.
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                       # FastAPI app factory + startup
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                          # API layer
â”‚   â”‚   â”œâ”€â”€ routes.py                 # Central route registration
â”‚   â”‚   â”œâ”€â”€ deps.py                   # Shared dependencies
â”‚   â”‚   â””â”€â”€ websocket.py              # WebSocket handlers
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                         # Core configuration
â”‚   â”‚   â”œâ”€â”€ application.py            # App initialization
â”‚   â”‚   â”œâ”€â”€ config.py                 # Settings (env vars)
â”‚   â”‚   â”œâ”€â”€ logger.py                 # Structured logging
â”‚   â”‚   â””â”€â”€ security.py               # JWT, encryption
â”‚   â”‚
â”‚   â”œâ”€â”€ infra/                        # Infrastructure layer
â”‚   â”‚   â”œâ”€â”€ cosmos/
â”‚   â”‚   â”‚   â”œâ”€â”€ client.py             # Cosmos DB client
â”‚   â”‚   â”‚   â””â”€â”€ base_repository.py    # Base CRUD
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â””â”€â”€ token.py              # JWT management
â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â””â”€â”€ blob_client.py        # Azure Blob
â”‚   â”‚   â”œâ”€â”€ queue/
â”‚   â”‚   â”‚   â”œâ”€â”€ celery_app.py         # Celery config
â”‚   â”‚   â”‚   â””â”€â”€ redis_client.py       # Redis client
â”‚   â”‚   â””â”€â”€ vault/
â”‚   â”‚       â””â”€â”€ credentials.py        # Key Vault
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/                   # Request pipeline
â”‚   â”‚   â”œâ”€â”€ register.py               # Middleware setup
â”‚   â”‚   â”œâ”€â”€ cors.py                   # CORS config
â”‚   â”‚   â”œâ”€â”€ logging.py                # Request logging
â”‚   â”‚   â”œâ”€â”€ rate_limit.py             # SlowAPI
â”‚   â”‚   â”œâ”€â”€ security_headers.py       # CSP, HSTS
â”‚   â”‚   â””â”€â”€ error_handler.py          # Exception handling
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/                      # Domain modules
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ auth/                     # Authentication
â”‚   â”‚   â”‚   â”œâ”€â”€ controller.py         # /auth endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ service.py            # Business logic
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas.py            # Pydantic models
â”‚   â”‚   â”‚   â””â”€â”€ repository.py         # Data persistence
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ users/                    # User management
â”‚   â”‚   â”‚   â”œâ”€â”€ controller.py
â”‚   â”‚   â”‚   â”œâ”€â”€ service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas.py
â”‚   â”‚   â”‚   â””â”€â”€ repository.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ workspaces/               # Workspace/teams
â”‚   â”‚   â”‚   â”œâ”€â”€ controller.py
â”‚   â”‚   â”‚   â”œâ”€â”€ service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas.py
â”‚   â”‚   â”‚   â””â”€â”€ repository.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ workflows/                # ğŸ”¥ Workflow management
â”‚   â”‚   â”‚   â”œâ”€â”€ controller.py         # CRUD endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ service.py            # Validation, versioning
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas.py            # WorkflowDefinition
â”‚   â”‚   â”‚   â”œâ”€â”€ repository.py         # Cosmos DB
â”‚   â”‚   â”‚   â””â”€â”€ executor.py           # Execution engine
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ executions/               # ğŸ”¥ Execution tracking
â”‚   â”‚   â”‚   â”œâ”€â”€ controller.py         # Start/stop/logs
â”‚   â”‚   â”‚   â”œâ”€â”€ service.py            # Queue management
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas.py            # ExecutionStatus
â”‚   â”‚   â”‚   â”œâ”€â”€ repository.py         # Execution history
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.py          # Real-time updates
â”‚   â”‚   â”‚   â””â”€â”€ monitoring.py         # Metrics tracking
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ nodes/                    # ğŸ”¥ NODE PLUGIN SYSTEM
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py               # BaseNode class
â”‚   â”‚   â”‚   â”œâ”€â”€ registry.py           # Node discovery
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ core/                 # Core nodes
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ entry.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ text.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ iterator.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ switch.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ parameter.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ response.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/                   # AI nodes
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ llm.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ prompt_template.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ integration/          # Integrations
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ email.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ mailtrap.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ zapier.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ data/                 # Data ops
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ database_connect.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ fetch_table.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ store_table.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ kv_get.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ kv_set.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ to_json.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ global_data.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ logic/                # Logic nodes
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ code_runner.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ execute_workflow.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ visualization/        # Output nodes
â”‚   â”‚   â”‚       â””â”€â”€ bar_chart.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ credentials/              # Credential mgmt
â”‚   â”‚   â”‚   â”œâ”€â”€ controller.py
â”‚   â”‚   â”‚   â”œâ”€â”€ service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas.py
â”‚   â”‚   â”‚   â””â”€â”€ repository.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ health/                   # Health checks
â”‚   â”‚       â””â”€â”€ controller.py
â”‚   â”‚
â”‚   â””â”€â”€ workers/                      # ğŸ”¥ Async workers
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ celery_app.py             # Celery config
â”‚       â”œâ”€â”€ workflow_tasks.py         # Workflow execution
â”‚       â””â”€â”€ scheduled_tasks.py        # Cron jobs
â”‚
â”œâ”€â”€ tests/                            # Test suite
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ test_nodes.py
â”‚   â”‚   â””â”€â”€ test_executor.py
â”‚   â”œâ”€â”€ integration/
â”‚   â”‚   â””â”€â”€ test_workflows.py
â”‚   â””â”€â”€ conftest.py
â”‚
â”œâ”€â”€ scripts/                          # Utility scripts
â”‚   â”œâ”€â”€ seed_db.py
â”‚   â””â”€â”€ setup_azure.sh
â”‚
â”œâ”€â”€ .env                              # Environment variables
â”œâ”€â”€ .env.example
â”œâ”€â”€ Dockerfile                        # Main app container
â”œâ”€â”€ Dockerfile.worker                 # Worker container
â”œâ”€â”€ docker-compose.yaml
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ requirements-dev.txt
â””â”€â”€ run.py
    </pre>

    <!-- 6. Frontend Folder Structure -->
    <h1>6. Frontend Folder Structure (React)</h1>

    <pre>
syngentix/
â”œâ”€â”€ public/                           # Static assets
â”‚   â””â”€â”€ images/
â”‚
â”œâ”€â”€ src/
â”‚   â”‚
â”‚   â”œâ”€â”€ @types/                       # TypeScript definitions
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ workflow.ts
â”‚   â”‚   â”œâ”€â”€ node.ts
â”‚   â”‚   â”œâ”€â”€ execution.ts
â”‚   â”‚   â””â”€â”€ material-tailwind.d.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/                       # Static assets (bundled)
â”‚   â”‚   â”œâ”€â”€ background/
â”‚   â”‚   â”œâ”€â”€ icons/
â”‚   â”‚   â”œâ”€â”€ logos/
â”‚   â”‚   â””â”€â”€ switchIcon/
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                   # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ DataTable/                # TanStack Table
â”‚   â”‚   â”œâ”€â”€ Icons/                    # Lucide icons
â”‚   â”‚   â”œâ”€â”€ Layout/
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Footer.tsx
â”‚   â”‚   â”œâ”€â”€ SearchInput/
â”‚   â”‚   â””â”€â”€ Workflow/                 # ğŸ”¥ Workflow builder components
â”‚   â”‚       â”œâ”€â”€ NodeSidebar.tsx       # Node palette
â”‚   â”‚       â”œâ”€â”€ CustomNode.tsx        # React Flow node
â”‚   â”‚       â”œâ”€â”€ NodeConfigPanel.tsx   # Node configuration
â”‚   â”‚       â”œâ”€â”€ ExecutionViewer.tsx   # Real-time execution
â”‚   â”‚       â””â”€â”€ MiniMapPanel.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ configs/
â”‚   â”‚   â””â”€â”€ app.config.ts             # Global settings
â”‚   â”‚
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ api.constant.ts           # API endpoints
â”‚   â”‚   â”œâ”€â”€ app.constant.ts           # App constants
â”‚   â”‚   â””â”€â”€ navigation.constant.ts    # Routes
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                     # API & Business Logic
â”‚   â”‚   â”œâ”€â”€ ApiService.ts             # Axios instance
â”‚   â”‚   â”œâ”€â”€ AuthService.ts            # Auth logic
â”‚   â”‚   â”œâ”€â”€ WorkflowService.ts        # Workflow CRUD
â”‚   â”‚   â”œâ”€â”€ NodeService.ts            # Node registry
â”‚   â”‚   â”œâ”€â”€ ExecutionService.ts       # Execution API
â”‚   â”‚   â””â”€â”€ RtkQueryService.ts        # RTK Query slices
â”‚   â”‚       â”œâ”€â”€ authApi
â”‚   â”‚       â”œâ”€â”€ workflowApi
â”‚   â”‚       â”œâ”€â”€ nodeApi
â”‚   â”‚       â””â”€â”€ executionApi
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                        # Redux State Management
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ authSlice.ts
â”‚   â”‚   â”‚   â””â”€â”€ authThunks.ts
â”‚   â”‚   â”œâ”€â”€ workflow/
â”‚   â”‚   â”‚   â”œâ”€â”€ workflowSlice.ts
â”‚   â”‚   â”‚   â””â”€â”€ workflowThunks.ts
â”‚   â”‚   â”œâ”€â”€ execution/
â”‚   â”‚   â”‚   â”œâ”€â”€ executionSlice.ts
â”‚   â”‚   â”‚   â””â”€â”€ executionThunks.ts
â”‚   â”‚   â”œâ”€â”€ index.ts                  # Store configuration
â”‚   â”‚   â””â”€â”€ rootReducer.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                        # Helpers & Custom Hooks
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useTheme.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts       # ğŸ”¥ WebSocket hook
â”‚   â”‚   â”‚   â””â”€â”€ useWorkflowBuilder.ts
â”‚   â”‚   â”œâ”€â”€ common.ts
â”‚   â”‚   â”œâ”€â”€ dateUtils.ts
â”‚   â”‚   â””â”€â”€ logoUtils.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ views/                        # Page Components (Routes)
â”‚   â”‚   â”œâ”€â”€ Auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ SignIn/
â”‚   â”‚   â”‚   â””â”€â”€ SignUp/
â”‚   â”‚   â”œâ”€â”€ Dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ Dashboard.tsx
â”‚   â”‚   â”œâ”€â”€ Workflows/                # ğŸ”¥ Workflow pages
â”‚   â”‚   â”‚   â”œâ”€â”€ WorkflowList.tsx      # List all workflows
â”‚   â”‚   â”‚   â”œâ”€â”€ WorkflowBuilder.tsx   # Visual builder (React Flow)
â”‚   â”‚   â”‚   â””â”€â”€ WorkflowExecutions.tsx # Execution history
â”‚   â”‚   â”œâ”€â”€ Executions/
â”‚   â”‚   â”‚   â”œâ”€â”€ ExecutionList.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ExecutionDetails.tsx  # Logs, metrics
â”‚   â”‚   â”œâ”€â”€ Nodes/
â”‚   â”‚   â”‚   â””â”€â”€ NodeCatalog.tsx       # Browse available nodes
â”‚   â”‚   â”œâ”€â”€ Profile/
â”‚   â”‚   â”œâ”€â”€ Settings/
â”‚   â”‚   â”‚   â”œâ”€â”€ Credentials.tsx       # API key management
â”‚   â”‚   â”‚   â””â”€â”€ Preferences.tsx
â”‚   â”‚   â””â”€â”€ Agents/
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                       # Root component
â”‚   â”œâ”€â”€ main.tsx                      # Entry point
â”‚   â””â”€â”€ index.css                     # Tailwind directives
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts                    # Vite config
â””â”€â”€ tailwind.config.js
    </pre>

    <!-- 7. Workflow Execution Engine -->
    <h1>7. Workflow Execution Engine</h1>

    <h2>Execution Flow</h2>
    <pre>
1. User clicks "Execute" in frontend
2. Frontend sends POST /api/workflows/{id}/execute
3. Backend API validates workflow + enqueues Celery task
4. Returns execution_id immediately (non-blocking)
5. Celery worker picks up task from queue
6. WorkflowExecutor initializes:
   - Loads workflow
